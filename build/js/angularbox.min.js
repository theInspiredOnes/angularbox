var angularbox;angularbox=angular.module("angularbox",[]),angularbox.service("registerServ",function(){var a,b,c,d,e;return e={},c="$$none",d={},a=function(){function a(a,b,d){this.rel=null!=a?a:c,this.src=b,this.title=null!=d?d:""}return a}(),b=function(a){return d["undefined"==typeof a?c:a]},e.add=function(b,c,e){var f;return"undefined"==typeof c?void 0:(f=new a(b,c,e),d.hasOwnProperty(f.rel)?d[f.rel].push(f):d[f.rel]=[f],f.id=d[f.rel].length-1)},e.get=function(a,c){var d;return"undefined"==typeof c?null:(d=b(a),c>=0&&c<d.length?d[c]:null)},e.next=function(a,c){var d;return d=b(a),this.get(a,(c+1)%d.length)},e.prev=function(a,c){var d;return d=b(a),--c<0&&(c=d.length-1),this.get(a,c)},e}),angularbox.directive("angularbox",function(){return{restrict:"A",replace:!0,template:'<div class="angularbox-style hidden" data-ng-click="close($event)" data-ng-class="{hidden: isHidden, fadeout: isFading}">\n	<figure>\n		<img data-ng-src={{src}} data-ng-class="{loaded: !isLoading}" data-ng-click="catch($event)" />\n		<figcaption data-ng-show="caption"><span data-ng-click="catch($event)">{{caption}}</span></figcaption>\n	</figure>\n	<div class="spinner" data-ng-show="isLoading"><span></span><span></span><span></span>\n	</div>\n	<button class="prev" title="previous" data-ng-click="prev($event)">&lsaquo;</button>\n	<button class="next" title="next" data-ng-click="next($event)">&rsaquo;</button>\n	<button class="close" title="close">&times;</button>\n</div>',controller:["$scope","$element","$timeout","$window","$document","registerServ",function(a,b,c,d,e,f){var g,h,i,j,k,l,m;g={},m=250,i=angular.element(b.children()[0].childNodes[1]),a.isHidden=!0,a.isLoading=a.isFading=!1,i.bind("load",function(){a.isLoading=!1,a.$apply()}),j=function(b){if(!a.isHidden&&!a.isFading){switch(b.keyCode){case 27:a.close(b);break;case 39:a.next(b);break;case 37:a.prev(b)}a.$apply()}},e.bind("keydown",j),k=function(b,c,d){g=f.get(c,d),a.isHidden=!1,a.$apply(l)},a.$on("angularboxOpen",k),l=function(){a.isLoading=!0,a.src=g.src,a.caption=g.title},h=function(){a.isFading=!1,a.isHidden=!0},a.close=function(b){b.stopPropagation(),a.isFading=!0,c(h,m)},a.next=function(a){a.stopPropagation(),g=f.next(g.rel,g.id),l()},a.prev=function(a){a.stopPropagation(),g=f.prev(g.rel,g.id),l()},a["catch"]=function(a){a.stopPropagation()}}]}}),angularbox.directive("angularbox",["$rootScope","registerServ",function(a,b){return{restrict:"C",link:function(c,d,e){var f,g;g=e.rel,f=b.add(g,e.href,e.title),d.bind("click",function(b){return b.preventDefault(),a.$broadcast("angularboxOpen",g,f)})}}}]);